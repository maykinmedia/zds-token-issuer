{% extends "master.html" %}
{% load sniplates i18n %}
{% spaceless %}

    {% block content %}
        <article class="article" role="article">
            <div class="article__section">
                <h1>{% trans "Register client" %}</h1>

                {% if request.session.client_id %}
                    <p>{% trans "Please find your newly created credentials below." %}</p>

                    <table class="table">
                        {% trans "Client ID" as translation_client_id %}
                        {% include 'components/table/row-key-value.html' with key=translation_client_id value=request.session.client_id only %}
                        {% trans "Secret" as translation_secret %}
                        {% include 'components/table/row-key-value.html' with key=translation_secret value=request.session.secret only %}
                    </table>

                {% else %}
                    <p>{% blocktrans trimmed %}
                        Registering your client here will give you a client ID and secret,
                        and ensure you can use the same ID and secret in all services.
                    {% endblocktrans %}</p>
                {% endif %}


                {% load_widgets form='forms.html' %}
                <form class="form" action="." method="post">
                    {% csrf_token %}
                    {% form_field form.client_label %}
                    {% widget 'form:submit-btn' %}

                    {% if request.session.client_id %}
                        <a class="button" href="{% url 'generate-jwt' %}">{% trans "Generate a JWT" %}</a>
                    {% endif %}
                </form>
            </div>
        </article>

        {% include 'components/sidebar/sidebar.html' %}
    {% endblock content %}
{% endspaceless %}
